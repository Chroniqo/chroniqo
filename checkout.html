<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Checkout - Chroniqo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="assets/css/styles.css">
  <style>
    .checkout__container {
      max-width: 600px;
      margin: 4rem auto;
      padding: 2rem;
      background-color: var(--container-color);
      color: var(--text-color);
      border-radius: 1rem;
    }

    .checkout__container input,
    .checkout__container select {
      width: 100%;
      padding: 0.75rem;
      margin-bottom: 1rem;
      border-radius: 0.5rem;
      border: 1px solid #ccc;
      background-color: var(--body-color);
      color: var(--text-color);
    }

    .checkout__container button {
      width: 100%;
      padding: 1rem;
      background-color: var(--first-color);
      color: white;
      border: none;
      border-radius: 0.5rem;
      font-weight: bold;
      cursor: pointer;
    }

    .hidden {
        display: none !important;}

    /* Modal styles */
    .modal {
      position: fixed;
      inset: 0;
      background-color: rgba(0,0,0,0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }

    .modal-content {
      background-color: var(--container-color);
      color: var(--text-color);
      padding: 2rem;
      border-radius: 1rem;
      width: 90%;
      max-width: 400px;
      text-align: center;
    }

    .modal-content textarea {
      width: 100%;
      height: 80px;
      padding: 0.5rem;
      margin-top: 1rem;
      border-radius: 0.5rem;
      resize: none;
    }

    .modal-content button {
      margin-top: 1rem;
    }
  </style>
</head>
<body>

<div class="checkout__container">
  <h2>Step 2: Checkout</h2>

  <label for="name">Full Name</label>
  <input type="text" id="name" placeholder="Your name" required>

  <label for="address">Address</label>
  <input type="text" id="address" placeholder="123 Chroniqo Ave" required>

  <label for="payment-method">Payment Method</label>
  <select id="payment-method" required>
    <option value="">Select...</option>
    <option value="cash">Cash</option>
    <option value="card">Card</option>
  </select>

  <div id="card-fields" class="hidden">
    <label for="card-number">Card Number</label>
    <input type="text" id="card-number" placeholder="0000 0000 0000 0000">

    <label for="card-expiry">Expiry Date</label>
    <input type="text" id="card-expiry" placeholder="MM/YY">

    <label for="card-cvc">CVC</label>
    <input type="text" id="card-cvc" placeholder="123">
  </div>

  <button onclick="placeOrder()">Place Order</button>
</div>

<!-- Modal -->
<div class="modal hidden" id="feedbackModal">
  <div class="modal-content">
    <h3>Thank you for your order!</h3>
    <p>We’d love to hear your feedback:</p>
    <textarea id="feedback" placeholder="What did you think of your experience?"></textarea>
    <button onclick="submitFeedback()">Submit Feedback</button>
  </div>
</div>

<script>
  const paymentSelect = document.getElementById('payment-method');
  const cardFields = document.getElementById('card-fields');
  const modal = document.getElementById('feedbackModal');

  // ✅ Ensure modal is hidden on page load
  window.addEventListener('DOMContentLoaded', () => {
    modal.classList.add('hidden');
  });

  paymentSelect.addEventListener('change', () => {
    cardFields.classList.toggle('hidden', paymentSelect.value !== 'card');
  });

  function placeOrder() {
    const name = document.getElementById('name').value.trim();
    const address = document.getElementById('address').value.trim();
    const method = paymentSelect.value;

    if (!name || !address || !method) {
      alert('Please fill out all required fields.');
      return;
    }

    if (method === 'card') {
      const cardNum = document.getElementById('card-number').value.trim();
      const expiry = document.getElementById('card-expiry').value.trim();
      const cvc = document.getElementById('card-cvc').value.trim();
      if (!cardNum || !expiry || !cvc) {
        alert('Please fill in your card details.');
        return;
      }
    }

    // Clear cart (if stored in localStorage)
    localStorage.removeItem('cartItems');

    // Show feedback modal
    modal.classList.remove('hidden');
  }

  function submitFeedback() {
    const feedback = document.getElementById('feedback').value.trim();
    console.log('Feedback:', feedback);
    alert('Thanks for your feedback!');
    window.location.href = 'index.html';
  }
</script>


</body>
</html>
